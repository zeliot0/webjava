{% extends 'base.html.twig' %}

{% block title %}Mouvement #{{ mouvement.idMo }}{% endblock %}

{% block body %}

<div class="page-header">
    <div>
        <h1>Détails du mouvement</h1>
        <p>Informations complètes</p>
    </div>

    <div style="display:flex;gap:12px">
        <a href="{{ path('app_mouvement_index') }}" class="btn">← Retour</a>

        {% if mouvement.produit %}
            <a href="{{ path('app_produit_show', {'id_p': mouvement.produit.idP}) }}" class="btn">
                <i class="fa-solid fa-box"></i>
                Voir produit
            </a>
        {% endif %}

        <a href="{{ path('app_mouvement_edit', {'id_mo': mouvement.idMo}) }}" class="btn primary">
            Modifier
        </a>
    </div>
</div>

<div class="form-shell">
    <div class="form-card">

        {% if mouvement.produit %}
            <div class="form-section">
                <h3>Produit</h3>

                <div style="display:flex; gap:16px; align-items:center; margin-bottom:18px">
                    <div class="thumb" style="width:60px; height:60px">
                        {% if mouvement.produit.photoP %}
                            <img src="{{ asset('uploads/produits/' ~ mouvement.produit.photoP) }}" alt="{{ mouvement.produit.nomP }}">
                        {% else %}
                            <span class="thumb-placeholder">{{ mouvement.produit.nomP|slice(0, 1)|upper }}</span>
                        {% endif %}
                    </div>

                    <div>
                        <div style="font-weight:900; font-size:1.05rem">{{ mouvement.produit.nomP }}</div>
                        <div style="color: var(--muted); font-weight:700">
                            #{{ mouvement.produit.idP }} • {{ mouvement.produit.categorieP }}
                        </div>
                    </div>
                </div>

                <div class="form-grid-2">
                    <div class="info-box">
                        <span class="info-label">Stock actuel</span>
                        <span class="info-value">{{ mouvement.produit.quantiteStock }}</span>
                    </div>

                    <div class="info-box">
                        <span class="info-label">Unité</span>
                        <span class="info-value">{{ mouvement.produit.uniteP }}</span>
                    </div>

                    <div class="info-box">
                        <span class="info-label">Emplacement</span>
                        <span class="info-value">{{ mouvement.produit.emplacement }}</span>
                    </div>

                    <div class="info-box">
                        <span class="info-label">Date d’ajout</span>
                        <span class="info-value">
                            {{ mouvement.produit.dateAjout ? mouvement.produit.dateAjout|date('d/m/Y') : '—' }}
                        </span>
                    </div>
                </div>
            </div>
        {% endif %}

        <div class="form-section">
            <h3>Informations générales</h3>

            <div class="form-grid-2">
                <div class="info-box">
                    <span class="info-label">Type</span>
                    <span class="info-value">{{ mouvement.typeM }}</span>
                </div>

                <div class="info-box">
                    <span class="info-label">Quantité</span>
                    <span class="info-value">{{ mouvement.quantite }}</span>
                </div>

                <div class="info-box">
                    <span class="info-label">Date</span>
                    <span class="info-value">
                        {{ mouvement.dateMouvement|date('d/m/Y') }}
                    </span>
                </div>

                <div class="info-box">
                    <span class="info-label">Motif</span>
                    <span class="info-value">{{ mouvement.motif }}</span>
                </div>
            </div>
        </div>

        <div class="form-actions">
            {{ include('mouvement/_delete_form.html.twig') }}
        </div>

    </div>
</div>

{% endblock %}
